$(document).ready(function() {

/*  ==========================================================================
    Global
    ==========================================================================  */

    var siteUrl = $('body').data('siteurl');
    var baseUrl = $('body').data('baseurl');

/*  ==========================================================================
    Scroll to
    ==========================================================================  */

    $('.js_scroll_to').on('click', function(e) {
        e.preventDefault();
        scrollto = $(this).data('scrollto');
        $('html, body').animate({scrollTop: $(scrollto).offset().top - 150}, 400);
    });

/*  ==========================================================================
    Navigation
    ==========================================================================  */

/*  Shrink navigation on scroll
    ----------------------------------  */

    function shrinkNav(){
        $(window).scroll(function(){
            if($(window).scrollTop() > 20){
                $('body').addClass('shrink_nav');
            }
            else{
                $('body').removeClass('shrink_nav');
            }
        })
	}
    shrinkNav();

    $(window).on('resize',function(){
        shrinkNav();
	});

/*  Toggle mobile nav
    ----------------------------------  */

    $('.js_mobile_nav').click(function(e) {
        e.preventDefault();
        $body=$('body');
        if ($body.hasClass('nav_is_open')) {
            $body.removeClass('nav_is_open');
        } else {
            $body.addClass('nav_is_open');
        }
    })

/*  ==========================================================================
    Cookies
    ==========================================================================  */

    $('.js_close_cookies').click(function(e){
        e.preventDefault();
        $('body').addClass('cookies_close');
        $.ajax({
            type    :"POST",
            url     :baseUrl+"/data/accept_cookies.php",
        });
    });

/*  ==========================================================================
    Skrollr
    ========================================================================== */

    function initSkrollr(){
    	if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {
    		// mobile
    	} else {
    		if($(window).width()>1440){
    			skrollr.init({
    				forceHeight: false,
    				edgeStrategy: 'set',
    				easing: {
    					WTF: Math.random,
    					inverted: function(p) {
    						return 1-p;
    					}
    				}
    			});
    		} else {
    			skrollr.init().destroy();
    		}
    	}
    }

    initSkrollr();

    $(window).on("resize",function(){
    	initSkrollr();
    });

});
